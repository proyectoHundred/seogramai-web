<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SeogramAI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            tiffany: "#40E0D0",
          },
        },
      },
    };
  </script>
  <style>
    .faq-answer {
      display: none;
    }
    .faq-open .faq-answer {
      display: block;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(
        circle at var(--x, 50%) var(--y, 50%),
        rgba(64, 224, 208, 0.2),
        transparent 40%
      );
      pointer-events: none;
      z-index: 0;
      transition: background-position 0.1s;
    }
    #visualizer iframe {
      width: 100%;
      height: 300px;
      border: none;
      border-radius: 0.75rem; /* rounded-xl */
    }
  </style>
</head>
<body
  class="bg-white text-gray-900 relative z-10"
  onmousemove="updateMousePosition(event)"
>
  <script>
    function updateMousePosition(e) {
      document.body.style.setProperty("--x", `${e.clientX}px`);
      document.body.style.setProperty("--y", `${e.clientY}px`);
    }
    function toggleFAQ(button) {
      const faqItem = button.parentElement;
      faqItem.classList.toggle("faq-open");
      const icon = button.querySelector(".faq-icon");
      icon.textContent = faqItem.classList.contains("faq-open") ? "‚Äì" : "+";
    }
  </script>
  <!-- NAVBAR y HERO aqu√≠ igual -->

  <section
    class="min-h-screen flex flex-col justify-center items-center px-6 text-center relative z-10"
  >
    <h1
      class="text-4xl md:text-6xl font-bold mb-6 leading-tight max-w-3xl"
    >
      Optimiza tu p√°gina web con <span class="text-tiffany">IA</span> en
      cuesti√≥n de segundos.
    </h1>
    <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-xl">
      Analizamos tu sitio. Te damos el HTML optimizado. Sin tocar tu web real.
    </p>
    <a
      href="#comenzar"
      class="bg-tiffany hover:bg-teal-400 text-white px-6 py-3 rounded-xl text-lg font-medium transition-all"
      >Probar gratis</a
    >
    <div class="mt-12 w-full max-w-4xl">
      <div
        class="border-2 border-dashed border-gray-300 rounded-xl h-[300px] flex items-center justify-center text-gray-400 text-lg"
        id="visualizer"
      >
        Aqu√≠ ir√° el visualizador del resultado üß†
      </div>
    </div>
  </section>

  <!-- PROBAR GRATIS -->
  <section id="comenzar" class="py-24 bg-white px-6 text-center">
    <div class="max-w-2xl mx-auto">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">Prueba SeogramAI gratis</h2>
      <p class="text-gray-600 mb-8">
        Introduce la URL de tu p√°gina web y visualiza c√≥mo podemos mejorarla con
        IA.
      </p>
      <form
        id="urlForm"
        class="flex flex-col md:flex-row gap-4 justify-center"
      >
        <input
          type="url"
          id="urlInput"
          required
          placeholder="https://tusitio.com"
          class="w-full md:w-2/3 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-tiffany"
        />
        <button
          type="submit"
          class="bg-tiffany hover:bg-teal-400 text-white px-6 py-3 rounded-lg font-medium transition"
        >
          Analizar
        </button>
      </form>
      <p class="text-sm text-gray-400 mt-4">
        * No realizamos ning√∫n cambio en tu sitio web real.
      </p>
    </div>
  </section>

  <script>
    const form = document.getElementById("urlForm");
    const input = document.getElementById("urlInput");
    const visualizer = document.getElementById("visualizer");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const url = input.value.trim();
      if (!url) {
        alert("Introduce una URL v√°lida");
        return;
      }

      visualizer.textContent = "Analizando...";

      try {
        const response = await fetch(
          "https://backend-xpf4.onrender.com/optimize",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ url }),
          }
        );

        const data = await response.json();

        if (data.error) {
          visualizer.textContent = `Error: ${data.error}`;
        } else {
          // Carga el HTML en un iframe para evitar problemas de estilos rotos
          visualizer.innerHTML = `<iframe sandbox="allow-scripts allow-same-origin"></iframe>`;
          const iframe = visualizer.querySelector("iframe");
          const doc = iframe.contentDocument || iframe.contentWindow.document;
          doc.open();
          doc.write(data.optimized_html);
          doc.close();
        }
      } catch (error) {
        visualizer.textContent = "Error en la conexi√≥n al backend";
        console.error(error);
      }
    });
  </script>
</body>
</html>
